{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"DatabaseStack":{"id":"DatabaseStack","path":"DatabaseStack","children":{"SongsTable":{"id":"SongsTable","path":"DatabaseStack/SongsTable","children":{"Resource":{"id":"Resource","path":"DatabaseStack/SongsTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"song_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"song_id","keyType":"HASH"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.190.0"}},"ScalingRole":{"id":"ScalingRole","path":"DatabaseStack/SongsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.190.0","metadata":[]}},"SongsBucket":{"id":"SongsBucket","path":"DatabaseStack/SongsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}},"TableName":{"id":"TableName","path":"DatabaseStack/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"BucketName":{"id":"BucketName","path":"DatabaseStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"BucketURI":{"id":"BucketURI","path":"DatabaseStack/BucketURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"DatabaseStack/CDKMetadata","children":{"Default":{"id":"Default","path":"DatabaseStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"DatabaseStack/Exports","children":{"Output{\"Fn::GetAtt\":[\"SongsTable64F8B317\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"SongsTable64F8B317\",\"Arn\"]}","path":"DatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"SongsTable64F8B317\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Ref\":\"SongsTable64F8B317\"}":{"id":"Output{\"Ref\":\"SongsTable64F8B317\"}","path":"DatabaseStack/Exports/Output{\"Ref\":\"SongsTable64F8B317\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DatabaseStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DatabaseStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"ApiStack":{"id":"ApiStack","path":"ApiStack","children":{"DependenciesLayer":{"id":"DependenciesLayer","path":"ApiStack/DependenciesLayer","children":{"Code":{"id":"Code","path":"ApiStack/DependenciesLayer/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/DependenciesLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/DependenciesLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/DependenciesLayer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.9"],"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"cd2380c1aad8b232578087904059db8485dda7e1a912f7fb7955d6176119164f.zip"},"description":"Layer containing Python dependencies"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.190.0","metadata":[]}},"SongsLambda":{"id":"SongsLambda","path":"ApiStack/SongsLambda","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/SongsLambda/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/SongsLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/SongsLambda/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/SongsLambda/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/SongsLambda/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttSongsTable64F8B317ArnEAB5B67E"},{"Ref":"AWS::NoValue"}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::ourchants-songs"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::ourchants-songs/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsLambdaServiceRoleDefaultPolicy1C9E4DB3","roles":[{"Ref":"SongsLambdaServiceRole228DD055"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[]}},"Code":{"id":"Code","path":"ApiStack/SongsLambda/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/SongsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/SongsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsLambda/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"52fcfa765a8defdae41a3a896c5d4c0a2feab19b93f360711bb87c1407da87e1.zip"},"environment":{"variables":{"DYNAMODB_TABLE_NAME":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefSongsTable64F8B31794ADE60C"},"S3_BUCKET":"ourchants-songs"}},"handler":"app.lambda_handler","layers":[{"Ref":"DependenciesLayerDF300E31"}],"role":{"Fn::GetAtt":["SongsLambdaServiceRole228DD055","Arn"]},"runtime":"python3.9","timeout":30}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.190.0","metadata":[]}},"SongsHttpApi":{"id":"SongsHttpApi","path":"ApiStack/SongsHttpApi","children":{"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Accept"],"allowMethods":["GET","POST","PUT","DELETE","OPTIONS"],"allowOrigins":["https://ourchants.com","http://ourchants-website.s3-website-us-east-1.amazonaws.com"],"maxAge":3000},"description":"HTTP API for managing songs","name":"SongsHttpApi","protocolType":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.190.0"}},"DefaultStage":{"id":"DefaultStage","path":"ApiStack/SongsHttpApi/DefaultStage","children":{"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/DefaultStage/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"autoDeploy":true,"stageName":"$default"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.190.0","metadata":[]}},"GET--songs":{"id":"GET--songs","path":"ApiStack/SongsHttpApi/GET--songs","children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"ApiStack/SongsHttpApi/GET--songs/LambdaIntegration","children":{"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/GET--songs/LambdaIntegration/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"payloadFormatVersion":"2.0"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.190.0","metadata":[]}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/GET--songs/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/songs"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/GET--songs/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"GET /songs","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}},"POST--songs":{"id":"POST--songs","path":"ApiStack/SongsHttpApi/POST--songs","children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/POST--songs/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/songs"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/POST--songs/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"POST /songs","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}},"GET--songs--{song_id}":{"id":"GET--songs--{song_id}","path":"ApiStack/SongsHttpApi/GET--songs--{song_id}","children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/GET--songs--{song_id}/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/songs/{song_id}"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/GET--songs--{song_id}/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"GET /songs/{song_id}","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}},"PUT--songs--{song_id}":{"id":"PUT--songs--{song_id}","path":"ApiStack/SongsHttpApi/PUT--songs--{song_id}","children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/PUT--songs--{song_id}/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/songs/{song_id}"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/PUT--songs--{song_id}/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"PUT /songs/{song_id}","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}},"DELETE--songs--{song_id}":{"id":"DELETE--songs--{song_id}","path":"ApiStack/SongsHttpApi/DELETE--songs--{song_id}","children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/DELETE--songs--{song_id}/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/songs/{song_id}"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/DELETE--songs--{song_id}/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"DELETE /songs/{song_id}","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}},"POST--presigned-url":{"id":"POST--presigned-url","path":"ApiStack/SongsHttpApi/POST--presigned-url","children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"ApiStack/SongsHttpApi/POST--presigned-url/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsLambda1C3C9254","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SongsHttpApiB8BB25F9"},"/*/*/presigned-url"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/SongsHttpApi/POST--presigned-url/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"SongsHttpApiB8BB25F9"},"authorizationType":"NONE","routeKey":"POST /presigned-url","target":{"Fn::Join":["",["integrations/",{"Ref":"SongsHttpApiGETsongsLambdaIntegrationC1F7DB57"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.190.0","metadata":[]}},"ApiUrl":{"id":"ApiUrl","path":"ApiStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"GitHubOidcDeploymentRoleStack":{"id":"GitHubOidcDeploymentRoleStack","path":"GitHubOidcDeploymentRoleStack","children":{"GitHubOIDCProvider":{"id":"GitHubOIDCProvider","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCProvider","children":{"Resource":{"id":"Resource","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCProvider/Resource","children":{"Default":{"id":"Default","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCProvider/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.OpenIdConnectProvider","version":"2.190.0","metadata":[]}},"Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider":{"id":"Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider","path":"GitHubOidcDeploymentRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"GitHubOidcDeploymentRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"Role":{"id":"Role","path":"GitHubOidcDeploymentRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}},"Handler":{"id":"Handler","path":"GitHubOidcDeploymentRoleStack/Custom::AWSCDKOpenIdConnectProviderCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.190.0"}},"GitHubOIDCDeployRole":{"id":"GitHubOIDCDeployRole","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCDeployRole","children":{"ImportGitHubOIDCDeployRole":{"id":"ImportGitHubOIDCDeployRole","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCDeployRole/ImportGitHubOIDCDeployRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":[]}},"Resource":{"id":"Resource","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCDeployRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"token.actions.githubusercontent.com:aud":"sts.amazonaws.com","token.actions.githubusercontent.com:sub":"repo:ford-at-home/ourchants-api:ref:refs/heads/main"}},"Effect":"Allow","Principal":{"Federated":{"Ref":"GitHubOIDCProvider4F328116"}}}],"Version":"2012-10-17"},"description":"GitHub Actions deployment role for ourchants-api repo","maxSessionDuration":3600,"roleName":"github-actions-ourchants-deploy"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCDeployRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"GitHubOidcDeploymentRoleStack/GitHubOIDCDeployRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["apigateway:*","cloudformation:*","dynamodb:*","iam:*","lambda:*","logs:*","s3:*"],"Condition":{"StringEquals":{"aws:RequestTag/aws:cloudformation:stack-name":["ApiStack","DatabaseStack"]}},"Effect":"Allow","Resource":"*"},{"Action":"iam:PassRole","Condition":{"StringEquals":{"iam:PassedToService":["cloudformation.amazonaws.com","lambda.amazonaws.com","apigateway.amazonaws.com"]}},"Effect":"Allow","Resource":{"Fn::GetAtt":["GitHubOIDCDeployRoleE2F51B85","Arn"]}}],"Version":"2012-10-17"},"policyName":"GitHubOIDCDeployRoleDefaultPolicyFD613566","roles":[{"Ref":"GitHubOIDCDeployRoleE2F51B85"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[]}},"CDKMetadata":{"id":"CDKMetadata","path":"GitHubOidcDeploymentRoleStack/CDKMetadata","children":{"Default":{"id":"Default","path":"GitHubOidcDeploymentRoleStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GitHubOidcDeploymentRoleStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GitHubOidcDeploymentRoleStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.190.0"}}}